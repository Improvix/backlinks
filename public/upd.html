<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>–ú–∏–≥—Ä–∞—Ü–∏—è –±–µ–∫–ª–∏–Ω–∫–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; background: #111; color: #fff; }
    input, button { padding: 0.5rem; font-size: 1rem; margin-bottom: 1rem; }
    button { background: #0d6efd; color: white; border: none; cursor: pointer; }
    #log { margin-top: 1rem; font-family: monospace; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h2>üîÅ –ú–∏–≥—Ä–∞—Ü–∏—è –±–µ–∫–ª–∏–Ω–∫–æ–≤ –≤ –ø–æ–¥–∫–æ–ª–ª–µ–∫—Ü–∏—é –ø—Ä–æ–µ–∫—Ç–∞</h2>

  <label>mainDomain:<br>
    <input type="text" id="domain" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, Ellington-hotel.com" style="width: 100%">
  </label>
  <br>

  <label>projectId:<br>
    <input type="text" id="projectId" placeholder="ID –ø—Ä–æ–µ–∫—Ç–∞ –∏–∑ mainProject" style="width: 100%">
  </label>
  <br>

  <button onclick="migrateLinks()">üöö –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –±–µ–∫–ª–∏–Ω–∫–∏</button>

  <div id="log"></div>

  <script>
    async function migrateLinks() {
      const domain = document.getElementById('domain').value.trim();
      const projectId = document.getElementById('projectId').value.trim();
      const log = document.getElementById('log');
      log.innerText = '‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞...';

      try {
        const res = await fetch('/api/migrate-backlinks-to-project', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ mainDomain: domain, projectId })
        });

        const result = await res.json();
        log.innerText = `‚úÖ –û—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞:\n` + JSON.stringify(result, null, 2);
      } catch (err) {
        log.innerText = '‚ùå –û—à–∏–±–∫–∞: ' + err.message;
      }
    }
  </script>
</body>
</html>